---
layout: default
title: nginx默认超时导致问题排查
---

# {{ page.title }}

## 起因
自己负责的一个旧系统由于前段时间服务器迁移，迁移后某个同步api数据的功能老出现504网关错误，一开始以为这个错误是对端服务器返回的，在接口上找了一圈也没发现原因。后来发现是nginx抛的错误。

## 解决
由于迁移服务器，由原来的apache改为nginx，并没有对超时进行设置，所以用了默认的超时时间，估计是60s
项目是运行在uwsgi上的，所以在 server 下加了个参数
```
uwsgi_read_timeout          600;
```
测试配置是否正常
```
nginx -t
```

重新加载配置文件
```
nginx -s reload
```

## 结果
重新加载配置后，一切正常了
